<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
    </ion-buttons>
    <ion-title>{{ 'DASHBOARD' | translate }}</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="refreshData()">
        <ion-icon slot="icon-only" name="refresh"></ion-icon>
      </ion-button>
      <!-- Button to go back to the home page -->
      <ion-button expand="block" (click)="goToHome()"> Home</ion-button>
      <!-- Logout button -->
      <ion-button (click)="logout()">Logout</ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>
<ion-content class="cyber-neon">  
<ion-content class="ion-padding">
  <ion-grid fixed>
    <!-- Last update time -->
    <ion-row class="ion-justify-content-center ion-margin-bottom">
      <ion-col size="12" class="ion-text-center">
        <small>{{ 'LAST_UPDATE' | translate }}: {{lastUpdate | date:'mediumTime'}}</small>
      </ion-col>
    </ion-row>
<!-- Sensor Data -->
<ion-row>
    <!-- Main weather cards -->
    <ion-row>
      <!-- Temperature -->
      <ion-col size="12" size-md="6" size-lg="3">
        <ion-card>
          <ion-card-header>
            <ion-card-title>
              <ion-icon name="thermometer"></ion-icon>
              {{ 'TEMPERATURE' | translate }}
            </ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <h1>{{displayTemperature | number:'1.1-1'}}°{{temperatureUnit === 'celsius' ? 'C' : 'F'}}</h1>
          <h1>{{ sensorData.temperature || 'N/A' }}°C</h1>
        </ion-card-content>
        </ion-card>
      </ion-col>

      <!-- Wind -->
      <ion-col size="12" size-md="6" size-lg="3">
        <ion-card>
          <ion-card-header>
            <ion-card-title>
              <ion-icon name="flag"></ion-icon>
              {{ 'WIND' | translate }}
            </ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <h1>{{ sensorData.windSpeed || 'N/A' }} km/h
              <span *ngIf="windSpeedUnit === 'kmh'">km/h</span>
              <span *ngIf="windSpeedUnit === 'mph'">mph</span>
              <span *ngIf="windSpeedUnit === 'ms'">m/s</span>
              <span *ngIf="windSpeedUnit === 'knots'">kts</span>
            </h1>
            <p>
              <ion-icon name="compass"></ion-icon>
              {{sensorData.windDirection|| 'N/A' }}°
            </p>
          </ion-card-content>
        </ion-card>
      </ion-col>

      <!-- Humidity -->
      <ion-col size="12" size-md="6" size-lg="3">
        <ion-card>
          <ion-card-header>
            <ion-card-title>
              <ion-icon name="water"></ion-icon>
              {{ 'HUMIDITY' | translate }}
            </ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <h1>{{ sensorData.humidity || 'N/A' }}%</h1>
            <ion-progress-bar [value]="sensorData.humidity/100"></ion-progress-bar>
          </ion-card-content>
        </ion-card>
      </ion-col>

      <!-- Pressure -->
      <ion-col size="12" size-md="6" size-lg="3">
        <ion-card>
          <ion-card-header>
            <ion-card-title>
              <ion-icon name="speedometer"></ion-icon>
              {{ 'PRESSURE' | translate }}
            </ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <h1>{{ sensorData.pressure || 'N/A' }} hPa
            </h1>
            </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>

    <!-- Second row of cards -->
    <ion-row>
      <!-- Precipitation -->
      <ion-col size="12" size-md="6" size-lg="3">
        <ion-card>
          <ion-card-header>
            <ion-card-title>
              <ion-icon name="rainy"></ion-icon>
              {{ 'PRECIPITATION' | translate }}
            </ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <h1>{{displayPrecipitation | number:'1.1-1'}} 
              <span *ngIf="precipitationUnit === 'mm'">mm</span>
              <span *ngIf="precipitationUnit === 'in'">in</span>
            </h1>
            <p>{{ 'RATE' | translate }}: {{displayPrecipitationRate | number:'1.1-1'}} 
              <span *ngIf="precipitationUnit === 'mm'">mm/h</span>
              <span *ngIf="precipitationUnit === 'in'">in/h</span>
            </p>
          </ion-card-content>
        </ion-card>
      </ion-col>

      <!-- Air Quality -->
      <ion-col size="12" size-md="6" size-lg="3">
        <ion-card [color]="airQualityColor">
          <ion-card-header>
            <ion-card-title>
              <ion-icon name="cloud"></ion-icon>
              {{ 'AIR_QUALITY' | translate }}
            </ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <h1>{{airQualityText}}</h1>
            <p>PM2.5: {{pm25}} µg/m³</p>
            <p>PM10: {{pm10}} µg/m³</p>
          </ion-card-content>
        </ion-card>
      </ion-col>
    <ion-button (click)="presentNotifications()">
        <ion-icon slot="icon-only" name="notifications"></ion-icon>
        <ion-badge *ngIf="unreadNotifications > 0" color="danger">{{unreadNotifications}}</ion-badge>
      </ion-button>
     
           

    

<ion-footer>
  <ion-toolbar>
    <ion-segment>
      <ion-segment-button value="history">
        <ion-icon name="time"></ion-icon>
        <ion-label>{{ 'HISTORY' | translate }}</ion-label>
      </ion-segment-button>
      <ion-segment-button value="settings" (click)="openSettings()">
        <ion-icon name="settings"></ion-icon>
        <ion-label>{{ 'SETTINGS' | translate }}</ion-label>
      </ion-segment-button>
      <ion-segment-button value="connectivity">
        <ion-icon [name]="connectivityIcon" [color]="connectivityIcon"></ion-icon>
        <ion-label>{{ 'CONNECTIVITY' | translate }}</ion-label>
      </ion-segment-button>
    </ion-segment>
  </ion-toolbar>
</ion-footer>