<ion-header>
  <ion-toolbar class="header-toolbar">
    <ion-buttons slot="start">
      <ion-button (click)="goToHome()">
        <ion-icon slot="icon-only" name="home"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>{{ 'DASHBOARD' | translate }}</ion-title>
    <ion-buttons slot="end">
      <ion-button class="refresh-button" (click)="refreshData()">
        <ion-icon slot="icon-only" name="refresh"></ion-icon>
      </ion-button>
      <ion-button class="logout-button" (click)="logout()">
        <ion-icon slot="icon-only" name="log-out"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="cyber-neon ion-padding dashboard-content">
  <ion-grid fixed class="dashboard-grid">
    <!-- First row of cards -->
    <ion-row>
      <!-- Temperature -->
      <ion-col size="12" size-md="6" size-lg="3">
        <ion-card>
          <ion-card-header>
            <ion-card-title>
              <ion-icon name="thermometer"></ion-icon>
              {{ 'TEMPERATURE' | translate }}
            </ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <h1>{{displayTemperature | number:'1.1-1'}}°{{temperatureUnit === 'celsius' ? 'C' : 'F'}}</h1>
          </ion-card-content>
        </ion-card>
      </ion-col>

      <!-- Wind -->
      <ion-col size="12" size-md="6" size-lg="3">
        <ion-card>
          <ion-card-header>
            <ion-card-title>
              <ion-icon name="flag"></ion-icon>
              {{ 'WIND' | translate }}
            </ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <h1>{{displayWindSpeed | number:'1.1-1'}} 
              <span *ngIf="windSpeedUnit === 'kmh'">km/h</span>
              <span *ngIf="windSpeedUnit === 'mph'">mph</span>
            </h1>
            <p>
              <ion-icon name="compass"></ion-icon>
              {{windDirection}}° {{windDirectionText}}
            </p>
          </ion-card-content>
        </ion-card>
      </ion-col>

      <!-- Humidity -->
      <ion-col size="12" size-md="6" size-lg="3">
        <ion-card>
          <ion-card-header>
            <ion-card-title>
              <ion-icon name="water"></ion-icon>
              {{ 'HUMIDITY' | translate }}
            </ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <h1>{{humidity}}%</h1>
            <ion-progress-bar [value]="humidity/100"></ion-progress-bar>
          </ion-card-content>
        </ion-card>
      </ion-col>

      <!-- Pressure -->
      <ion-col size="12" size-md="6" size-lg="3">
        <ion-card>
          <ion-card-header>
            <ion-card-title>
              <ion-icon name="speedometer"></ion-icon>
              {{ 'PRESSURE' | translate }}
            </ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <h1>{{displayPressure | number:'1.1-1'}} 
              <span *ngIf="pressureUnit === 'hpa'">hPa</span>
            </h1>
          </ion-card-content>
        </ion-card>
      </ion-col>
    <!-- Second row of cards -->
    <ion-row>
      <!-- Precipitation -->
      <ion-col size="12" size-md="6" size-lg="3">
        <ion-card>
          <ion-card-header>
            <ion-card-title>
              <ion-icon name="rainy"></ion-icon>
              {{ 'PRECIPITATION' | translate }}
            </ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <h1>{{displayPrecipitation | number:'1.1-1'}} mm</h1>
          </ion-card-content>
        </ion-card>
      </ion-col>

      <!-- Air Quality -->
      <ion-col size="12" size-md="6" size-lg="3">
        <ion-card [color]="airQualityColor">
          <ion-card-header>
            <ion-card-title>
              <ion-icon name="cloud"></ion-icon>
              {{ 'AIR_QUALITY' | translate }}
            </ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <h1>{{airQualityText}}</h1>
            <p>PM2.5: {{pm25}} µg/m³</p>
            <p>PM10: {{pm10}} µg/m³</p>
          </ion-card-content>
        </ion-card>
      </ion-col>

      <!-- Notifications -->
      <ion-col size="12" size-md="6" size-lg="3">
        <ion-button class="notification-button" (click)="presentNotifications()">
          <ion-icon name="notifications"></ion-icon>
          <ion-badge *ngIf="unreadNotifications > 0" color="danger">{{unreadNotifications}}</ion-badge>
        </ion-button>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>

<ion-footer>
  <ion-toolbar>
    <ion-segment>
      <ion-segment-button value="history" (click)="openHistory()">
        <ion-icon name="time"></ion-icon>
        <ion-label>{{ 'HISTORY' | translate }}</ion-label>
      </ion-segment-button>
      <ion-segment-button value="settings" (click)="openSettings()">
        <ion-icon name="settings"></ion-icon>
        <ion-label>{{ 'SETTINGS' | translate }}</ion-label>
      </ion-segment-button>
      <ion-segment-button value="logout" (click)="logout()">
        <ion-icon name="log-out"></ion-icon>
        <ion-label>{{ 'LOGOUT' | translate }}</ion-label>
      </ion-segment-button>
    </ion-segment>
  </ion-toolbar>
</ion-footer>